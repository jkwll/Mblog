<%@ page contentType="text/html; charset=utf-8" language="java"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
<%@ include file="/public/include.jsp"%>
<title>15</title>
</head>
<body>
	<%@ include file="/public/header.jsp"%>
	<article class="aboutcon">
		<%-- 头的下方--%>
		<%@ include file="/public/header2.jsp"%>
		<div class="index_about">
			<%-- 文章标题 --%>
			<%@ include file="/public/title.jsp"%>
			<div class="book left">
				<%-- 正文 --%>
				<h1 style="margin: 8px 0px 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); font-size: 28px; line-height: 36px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px; color: rgb(0, 153, 0);">项目需求：</span></h1><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;">&nbsp; &nbsp; &nbsp; &nbsp;</span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;">&nbsp; &nbsp; &nbsp; &nbsp; 后台的商品管理需要上传商品图片，选用FastDFS来存储图片，搭建Nginx提供http服务。在大多数的业务场景中需要为FastDFS存储的文件提供http下载服务，tracker和storage都有内置的http服务但是性能不满足要求，于是使用Nginx提供http服务。FastDFS作者余庆在后来的版本中增加了基于当前主流web服务器的扩展模块(包括nginx/apache)，其用意在于利用web服务器直接对本机storage数据文件提供http服务，以提高文件下载的性能。所以在搭建Nginx的时候，需要加上一个扩展模块。</span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;"><br style="box-sizing: border-box;"/></span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: center; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;"><div align="center"><img src="https://img-blog.csdn.net/20170109194226160?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhvdTJzXzEwMTIxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" style="border: none; box-sizing: border-box; margin: 0px; max-width: 100%; cursor: zoom-in; max-height: 100%;"/></div><br style="box-sizing: border-box;"/></span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;">&nbsp; &nbsp; &nbsp; &nbsp; 在每一台storage服务器主机上部署Nginx及FastDFS扩展模块，由Nginx模块对storage存储的文件提供http下载服务， 仅当当前storage节点找不到文件时会向源storage主机发起redirect或proxy动作。<br style="box-sizing: border-box;"/></span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;"><br style="box-sizing: border-box;"/></span></p><h1 style="margin: 8px 0px 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); font-size: 28px; line-height: 36px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><a target="_blank" style="box-sizing: border-box; color: rgb(12, 137, 207);" name="t1"></a><span style="box-sizing: border-box; font-size: 18px; color: rgb(0, 102, 0);">流程实现：</span></h1><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;"><br style="box-sizing: border-box;"/></span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;">关于FastDFS和Nginx在本文就不详细介绍了。看图片文件上传的流程。</span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;"><br style="box-sizing: border-box;"/></span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;"><div align="center"><img src="https://img-blog.csdn.net/20170109194353535?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhvdTJzXzEwMTIxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" style="border: none; box-sizing: border-box; margin: 0px; max-width: 100%; cursor: zoom-in; max-height: 100%;"/></div><br style="box-sizing: border-box;"/></span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;"><br style="box-sizing: border-box;"/></span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 18px;">&nbsp; &nbsp; &nbsp;先做一个Junit测试，这就是一个基本的上传流程。之前有个小提示，需要将fastdfs的jar引入到本地的仓库，再从web的pom中引入jar。将jar解压，引入maven项目到eclipse。执行maven install命令，在web项目的pom文件中引入</span></p><p style="margin-top: 0px; margin-bottom: 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-wrap: break-word; word-break: normal; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><br/></p><p><strong style="box-sizing: border-box;">[html]</strong>&nbsp;<a href="https://blog.csdn.net/zhou2s_101216/article/details/54291958#" class="ViewSource" title="view plain" target="_self" style="text-decoration: none; box-sizing: border-box; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; color: rgb(12, 137, 207); font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;">view plain</a><span data-mod="popu_168" style="box-sizing: border-box;">&nbsp;<a href="https://blog.csdn.net/zhou2s_101216/article/details/54291958#" class="CopyToClipboard" title="copy" target="_self" style="text-decoration: none; box-sizing: border-box; background-image: url(&quot;https://csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; padding: 1px; margin: 0px 10px 0px 0px; color: rgb(12, 137, 207); font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;">copy</a></span><span data-mod="popu_169" style="box-sizing: border-box;"></span></p><ol start="1" class="dp-xml list-paddingleft-2" style="box-sizing: border-box; margin-bottom: 24px; padding: 0px; border-top: none; border-right: 1px solid rgb(231, 229, 220); border-bottom: none; border-left: none; border-image: initial; list-style-position: initial; list-style-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92);"><li><p><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(0, 0, 0); background-color: inherit;"><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">span</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">&nbsp;</span><span class="attribute" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: red; background-color: inherit;">style</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">=</span><span class="attribute-value" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(0, 0, 255); background-color: inherit;">&quot;font-size:18px;&quot;</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">dependency</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(0, 0, 0); background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">groupId</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">org.csource</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;/</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">groupId</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(0, 0, 0); background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">artifactId</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">fastdfs-client-java</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;/</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">artifactId</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(0, 0, 0); background-color: inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">version</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">1.25</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;/</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">version</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">&nbsp;&nbsp;</span></span></p></li><li><p><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(0, 0, 0); background-color: inherit;"><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;/</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">dependency</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&lt;/</span><span class="tag-name" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">span</span><span class="tag" style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; color: rgb(153, 51, 0); background-color: inherit; font-weight: 700;">&gt;</span><span style="box-sizing: border-box; margin: 0px; padding: 0px; border: none; background-color: inherit;">&nbsp;&nbsp;</span></span></p></li></ol><p><span style="box-sizing: border-box; color: rgb(85, 85, 85); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; background-color: rgb(255, 255, 255); font-size: 18px;"><br style="box-sizing: border-box;"/><br style="box-sizing: border-box;"/></span><span style="color: rgb(85, 85, 85); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 15px; background-color: rgb(255, 255, 255);"></span></p><h1 style="margin: 8px 0px 16px; padding: 0px; box-sizing: border-box; color: rgb(79, 79, 79); font-size: 28px; line-height: 36px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; white-space: normal; background-color: rgb(255, 255, 255);"><a target="_blank" style="box-sizing: border-box; color: rgb(12, 137, 207);" name="t2"></a><span style="box-sizing: border-box; font-size: 18px; color: rgb(0, 102, 0);">代码实现：</span></h1><p><span style="box-sizing: border-box; font-size: 18px; color: rgb(0, 102, 0);"><br/></span></p><p><br/></p>
				<%@ include file="/public/lower.jsp"%>
			</div>
		</div>
		<%@ include file="/public/knowledge_right.jsp"%>
	</article>
	<%@ include file="/public/info.jsp"%>
	<script
		src="${ pageContext.request.contextPath }/knowledge/js/common.js"></script>
	<script
		src="${ pageContext.request.contextPath }/knowledge/js/silder.js"></script>
</body>
</html>